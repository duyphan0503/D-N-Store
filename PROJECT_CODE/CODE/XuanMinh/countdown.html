<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="./images/happy-birthday.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/countdown.css">
    <title>HAPPY BIRTHDAY</title>
</head>

<body>
    
    <!-- Nhạc -->
    <audio class="song" id="myMusic" loop>
        <source src="hbd.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>
    
    <div class="content">
        <div id="container" class="container">
            <div class="counter">
                <span id="digit" class="digit">4</span>
            </div>
        </div>
    </div>
    <script>
        var tik = setInterval(() => {
        var lyf = document.getElementById('digit')
        lyf.classList.toggle("digit");
        if (lyf.innerText == 0) {
            document.getElementById('container').classList.toggle("containeroverlay")
            window.location="cake.html";
            clearInterval(tik)
        } else {
            lyf.innerText -= 1
        }
        lyf.classList.toggle("digit");
        }, 1000)
    </script>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            var audio = $('#myMusic')[0];

            // Kiểm tra trạng thái nhạc từ localStorage
            if (localStorage.getItem('musicPlaying') === 'true') {
                var musicTime = localStorage.getItem('musicTime');
                if (musicTime) {
                    // Tiếp tục phát nhạc từ thời điểm đã lưu
                    audio.currentTime = parseFloat(musicTime); // Chuyển đổi chuỗi thành số
                    audio.play();
                }
            }

            // Lưu thời gian phát nhạc hiện tại vào localStorage
            audio.addEventListener('timeupdate', function() {
                localStorage.setItem('musicTime', audio.currentTime);
            });
        });
    </script>
</body>

</html>